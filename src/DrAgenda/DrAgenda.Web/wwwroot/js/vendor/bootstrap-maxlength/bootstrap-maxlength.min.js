!function(x){"use strict";x.event.special.destroyed||(x.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}),x.fn.extend({maxlength:function(p,e){var t=x("body");function h(e){var t=e.val();t=p.twoCharLinebreak?t.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):t.replace(new RegExp("\r?\n","g"),"\n");return p.utf8?function(e){for(var t=0,a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t++:t+=127<n&&n<2048?2:3}return t}(t):t.length}function f(e,t){return t-h(e)}function d(e,t){t.css({display:"block"}),e.trigger("maxlength.shown")}function u(e,t,a){var n="";return p.message?n="function"==typeof p.message?p.message(e,t):p.message.replace("%charsTyped%",a).replace("%charsRemaining%",t-a).replace("%charsTotal%",t):(p.preText&&(n+=p.preText),p.showCharsTyped?n+=a:n+=t-a,p.showMaxLength&&(n+=p.separator+t),p.postText&&(n+=p.postText)),n}function g(e,t,a,n){var o,s,r,i,l,c;n&&(n.html(u(t.val(),a,a-e)),0<e?(r=t,i=p.threshold,l=a,c=!0,!p.alwaysShow&&l-h(r)>i&&(c=!1),c?d(t,n.removeClass(p.limitReachedClass).addClass(p.warningClass)):(o=t,s=n,p.alwaysShow||(s.css({display:"none"}),o.trigger("maxlength.hidden")))):d(t,n.removeClass(p.warningClass).addClass(p.limitReachedClass))),p.customMaxAttribute&&(e<0?t.addClass("overmax"):t.removeClass("overmax"))}function m(e,t){var a,n,o=(n=(a=e)[0],x.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},a.offset()));if("function"!==x.type(p.placement))if(x.isPlainObject(p.placement))!function(e,t){if(e&&t){var n={};x.each(["top","bottom","left","right","position"],function(e,t){var a=p.placement[t];void 0!==a&&(n[t]=a)}),t.css(n)}}(p.placement,t);else{var s=e.outerWidth(),r=t.outerWidth(),i=t.width(),l=t.height();switch(p.appendToParent&&(o.top-=e.parent().offset().top,o.left-=e.parent().offset().left),p.placement){case"bottom":t.css({top:o.top+o.height,left:o.left+o.width/2-i/2});break;case"top":t.css({top:o.top-l,left:o.left+o.width/2-i/2});break;case"left":t.css({top:o.top+o.height/2-l/2,left:o.left-i});break;case"right":t.css({top:o.top+o.height/2-l/2,left:o.left+o.width});break;case"bottom-right":t.css({top:o.top+o.height,left:o.left+o.width});break;case"top-right":t.css({top:o.top-l,left:o.left+s});break;case"top-left":t.css({top:o.top-l,left:o.left-r});break;case"bottom-left":t.css({top:o.top+e.outerHeight(),left:o.left-r});break;case"centered-right":t.css({top:o.top+l/2,left:o.left+s-r-3});break;case"bottom-right-inside":t.css({top:o.top+o.height,left:o.left+o.width-r});break;case"top-right-inside":t.css({top:o.top-l,left:o.left+s-r});break;case"top-left-inside":t.css({top:o.top-l,left:o.left});break;case"bottom-left-inside":t.css({top:o.top+e.outerHeight(),left:o.left})}}else p.placement(e,t,o)}function b(e){var t=e.attr("maxlength")||p.customMaxAttribute;if(p.customMaxAttribute&&!p.allowOverMax){var a=e.attr(p.customMaxAttribute);(!t||a<t)&&(t=a)}return t||(t=e.attr("size")),t}return x.isFunction(p)&&!e&&(e=p,p={}),p=x.extend({showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1},p),this.each(function(){var i,l,c=x(this);function e(){var e=u(c.val(),i,"0");i=b(c),l||(l=x('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(e)),c.is("textarea")&&(c.data("maxlenghtsizex",c.outerWidth()),c.data("maxlenghtsizey",c.outerHeight()),c.mouseup(function(){c.outerWidth()===c.data("maxlenghtsizex")&&c.outerHeight()===c.data("maxlenghtsizey")||m(c,l),c.data("maxlenghtsizex",c.outerWidth()),c.data("maxlenghtsizey",c.outerHeight())})),p.appendToParent?(c.parent().append(l),c.parent().css("position","relative")):t.append(l),g(f(c,b(c)),c,i,l),m(c,l)}x(window).resize(function(){l&&m(c,l)}),p.showOnReady?c.ready(function(){e()}):c.focus(function(){e()}),c.on("maxlength.reposition",function(){m(c,l)}),c.on("destroyed",function(){l&&l.remove()}),c.on("blur",function(){l&&!p.showOnReady&&l.remove()}),c.on("input",function(){var e,t,a,n,o=b(c),s=f(c,o),r=!0;return p.validate&&s<0?(t=o,a=(e=c).val(),n=0,p.twoCharLinebreak&&"\n"===(a=a.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n")).substr(a.length-1)&&a.length%2==1&&(n=1),e.val(a.substr(0,t-n)),r=!1):g(s,c,i,l),("bottom-right-inside"===p.placement||"top-right-inside"===p.placement||"function"==typeof p.placement||p.message&&"function"==typeof p.message)&&m(c,l),r})})}})}(jQuery);