"use strict";function isFunction(n){return n&&"[object Function]"==={}.toString.call(n)}function runFunctionString(n){if(0<n.trim().length){var i=new Function(n);isFunction(i)&&i()}}self.addEventListener("message",function(n){self.client=n.source}),self.onnotificationclose=function(n){runFunctionString(n.notification.data.onClose),self.client.postMessage(JSON.stringify({id:n.notification.data.id,action:"close"}))},self.onnotificationclick=function(n){var c,i,e;void 0!==n.notification.data.link&&null!==n.notification.data.link&&(i=n.notification.data.origin,c=n.notification.data.link,e=i.substring(0,i.indexOf("/",8))+"/","/"===c[0]&&(c=1<c.length?c.substring(1,c.length):""),n.notification.close(),n.waitUntil(clients.matchAll({type:"window"}).then(function(n){for(var i,t,o=0;o<n.length;o++)if(i=n[o],"/"!==(t=e+c)[t.length-1]&&"/"===i.url[i.url.length-1]&&(t+="/"),i.url===t&&"focus"in i)return i.focus();if(clients.openWindow)return clients.openWindow("/"+c)}).catch(function(n){throw new Error("A ServiceWorker error occurred: "+n.message)}))),runFunctionString(n.notification.data.onClick)};